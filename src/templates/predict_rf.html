<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Iris | RF Classifier</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00f2ff; --secondary: #bd00ff; --bg-dark: #0f172a; --glass-bg: rgba(255,255,255,0.05); --glass-border: rgba(255,255,255,0.1); }
        body { font-family: 'Roboto', sans-serif; background: radial-gradient(circle at top left, #1a1a2e, #16213e, #0f172a); color: #e2e8f0; margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center; }
        .container { width:90%; max-width:450px; }
        .glass-card { background:var(--glass-bg); backdrop-filter: blur(12px); border:1px solid var(--glass-border); border-radius:16px; padding:2rem; }
        h1 { font-family:'Orbitron'; text-align:center; background:linear-gradient(to right,var(--primary),var(--secondary)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .input-group { margin-bottom:1rem; }
        label { display:block; font-size:0.8rem; color:#94a3b8; margin-bottom:0.4rem; text-transform:uppercase; letter-spacing:1px; }
        input[type="number"] { width:100%; padding:10px; border-radius:8px; border:1px solid var(--glass-border); background:rgba(0,0,0,0.2); color:#fff; font-family:'Orbitron', sans-serif; font-size:1rem; box-sizing:border-box; }
        input[type="number"]:focus { outline:none; border-color:var(--primary); box-shadow:0 0 15px rgba(0,242,255,0.2); background:rgba(0,0,0,0.4); }
        button.submit-btn { width:100%; padding:12px; border-radius:10px; border:none; background:linear-gradient(135deg,var(--secondary),var(--primary)); color:#fff; font-family:'Orbitron'; font-weight:700; cursor:pointer; text-transform:uppercase; letter-spacing:2px; transition:transform 0.2s, box-shadow 0.2s; }
        button.submit-btn:hover { transform:translateY(-2px); box-shadow:0 10px 20px rgba(0,242,255,0.3); }
        button.submit-btn:active { transform:translateY(0); }
        .result-container { margin-top:16px; text-align:center; display:none; }
        .prediction-badge { display:inline-block; background:rgba(255,255,255,0.1); padding:8px 16px; border-radius:50px; border:1px solid var(--primary); color:var(--primary); font-family:'Orbitron', sans-serif; margin-bottom:15px; box-shadow:0 0 15px rgba(0,242,255,0.2); }
        .flower-card { background:rgba(0,0,0,0.3); border-radius:16px; padding:10px; border:1px solid var(--glass-border); }
        .flower-image { width:100%; max-height:180px; object-fit:cover; border-radius:10px; display:block; }
        .spinner { display:none; width:20px; height:20px; border:3px solid rgba(255,255,255,0.3); border-radius:50%; border-top-color:#fff; animation:spin 1s linear infinite; margin:0 auto; }
        @keyframes spin{ to{ transform:rotate(360deg);} }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="glass-card">
            <h1>NEURAL IRIS â€” RandomForest</h1>
            <form id="predictionForm">
                <div class="input-group">
                    <label for="sepal_length">Sepal Length</label>
                    <input type="number" id="sepal_length" step="0.01" placeholder="0.00" required>
                </div>
                <div class="input-group">
                    <label for="sepal_width">Sepal Width</label>
                    <input type="number" id="sepal_width" step="0.01" placeholder="0.00" required>
                </div>
                <div class="input-group">
                    <label for="petal_length">Petal Length</label>
                    <input type="number" id="petal_length" step="0.01" placeholder="0.00" required>
                </div>
                <div class="input-group">
                    <label for="petal_width">Petal Width</label>
                    <input type="number" id="petal_width" step="0.01" placeholder="0.00" required>
                </div>
                <button type="submit" class="submit-btn"><span id="btnText">PREDICT (RF)</span><div class="spinner" id="btnSpinner"></div></button>
            </form>
            <div id="resultArea" class="result-container">
                <div class="prediction-badge">PREDICTION</div>
                <h2 id="predictedClass" style="font-family:Orbitron; color:#fff;"></h2>
                <div class="flower-card">
                    <img src="" id="flowerImage" class="flower-image" alt="Iris Prediction"
                        data-setosa="{{ url_for('static', filename='setosa.jpeg') }}"
                        data-versicolor="{{ url_for('static', filename='versicolor.jpeg') }}"
                        data-virginica="{{ url_for('static', filename='virginica.jpeg') }}" />
                </div>
            </div>
        </div>
    </div>
    <script>
        $(function(){
            $('#predictionForm').on('submit', function(e){
                e.preventDefault();
                var $btn = $('.submit-btn'); var $text = $('#btnText'); var $spinner = $('#btnSpinner');
                $text.hide(); $spinner.show(); $btn.css('opacity','0.7');
                var formData = {
                    'sepal_length': $('#sepal_length').val(),
                    'sepal_width': $('#sepal_width').val(),
                    'petal_length': $('#petal_length').val(),
                    'petal_width': $('#petal_width').val()
                };
                $.ajax({ type:'POST', url:'/predict_rf', data: formData, dataType:'json', encode:true })
                .done(function(data){
                    if(data.predicted_class){
                        $('#predictedClass').text(data.predicted_class.toUpperCase());
                        var imageUrl='';
                        switch(data.predicted_class){
                            case 'Setosa': imageUrl = $('#flowerImage').data('setosa'); break;
                            case 'Versicolor': imageUrl = $('#flowerImage').data('versicolor'); break;
                            case 'Virginica': imageUrl = $('#flowerImage').data('virginica'); break;
                        }
                        $('#flowerImage').attr('src', imageUrl);
                        $('#resultArea').show();
                    } else if(data.error){ alert(data.error); }
                    $text.show(); $spinner.hide(); $btn.css('opacity','1');
                }).fail(function(){ alert('SYSTEM ERROR: Neural Link Disconnected.'); $text.show(); $spinner.hide(); $btn.css('opacity','1'); });
            });
        });
    </script>
</body>
</html>